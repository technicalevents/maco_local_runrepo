<mvc:View controllerName="com.sap.cd.maco.monitor.ui.app.displayprocesses.view.flow.ProcessSteps"
		  xmlns="sap.m" 
		  xmlns:mvc="sap.ui.core.mvc"
		  xmlns:commons="sap.suite.ui.commons"
		  xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" 
		  xmlns:core="sap.ui.core" 
		  xmlns:uxap="sap.uxap"
		  xmlns:layout="sap.ui.layout">

  <commons:Timeline id="idProcessSteps"
				    showHeaderBar="false"
				    enableScroll="false"
				    groupBy="ActivityTimestamp"
				    groupByType="Day"
				    enableDoubleSided="true"
				    growingThreshold="1000"
				    sortOldestFirst="false"
				    content="{this>/ProcessStepData}">
    <commons:content>
      <commons:TimelineItem dateTime="{this>ActivityTimestamp}"
					        userName=""
					        userNameClickable="false"
					        text="{this>ActivityDescription}"
					        filterValue="{this>JobTitle}"
					        icon="{parts: [{path: 'this>BusinessObjectType'}, 
					                       {path: 'this>Direction'}],
					               formatter: '.formatter.processStepIcon'
					          }">
        <commons:embeddedControl>
          <VBox>
            <Label text="{this>ActivityDescription}" 
                    wrapping="true"/>

            <Text visible="{= ${this>BusinessObjectType} === 'ExceptionDoc'}"
                   text="{
                    		parts: [
                            	{path: 'i18n>DECISION_LBL'}, 
								{path: 'this>UserDescision'}
                            ], 
					        formatter: '.formatter.formatMessage'}"
            		class="comSapCdMacoMmtUiDispProcessReference"/>

            <ObjectAttribute class="comSapCdMacoMmtUiDispProcessMessageLink"
                press="navigateToBusinessObject"
                title="{= ${this>BusinessObjectType} === 'PDoc' ? ${i18n>PROCESS_DOCUMENT_LBL} : ${i18n>MARKET_MSG_DOCUMENT_LBL}}"
                visible="{= (${this>BusinessObjectType} === 'PDoc' || (${this>BusinessObjectType} === 'TransDoc' &amp;&amp; ${this>isExternalMessage}))}" 
                text="{parts: [
                      {path: 'i18n>MARKET_MESSAGE_REFERENCE_LINK_LBL'},
                      {path: 'this>ExternalUUID'}, 
                      {path: 'this>TechnicalMessage'}], 
                      formatter: '.formatter.formatMessage'}"
                active="true"
                />
            
            <ObjectStatus visible="{= ${this>BusinessObjectType} === 'TransDoc' &amp;&amp; ${this>isExternalMessage}}"
                title="{i18n>LINKED_DOCUMENT_STATUS_LBL}"
                text="{this>TransDocStatus}"
                state="{
                    path:'this>TDStatusCriticality',
                    formatter: '.formatter.criticality'
        	      	}" />
          </VBox>
        </commons:embeddedControl>
      </commons:TimelineItem>
    </commons:content>
  </commons:Timeline>
</mvc:View>