<mvc:View controllerName="com.sap.cd.maco.monitor.ui.app.displaymessages.view.MessagePage"
  xmlns="sap.m" 
  xmlns:mvc="sap.ui.core.mvc" 
  xmlns:c="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
  xmlns:core="sap.ui.core" 
  xmlns:uxap="sap.uxap"
  xmlns:reuseButton="com.sap.cd.maco.mmt.ui.reuse.control.button"
  xmlns:smartForm="sap.ui.comp.smartform"
  xmlns:smartField="sap.ui.comp.smartfield">
  <uxap:ObjectPageLayout
    id="objectPage"
    upperCaseAnchorBar="false">
    <uxap:headerTitle>
      <uxap:ObjectPageDynamicHeaderTitle>
        <uxap:expandedHeading>
          <Title text="{ExternalUUID}" wrapping="true"/>
        </uxap:expandedHeading>
        <uxap:snappedHeading>
          <Title text="{ExternalUUID}" wrapping="true"/>
        </uxap:snappedHeading>
        <uxap:expandedContent>
          <Text text="{parts: [{path: 'i18n>FORMAT_AMID_TXT_LBL'},
                                      {path: 'TechnicalMsgID'},
                                      {path: 'ExtBusinessMessageID'}],
                                      formatter: '.formatter.formatMessage'}" />
        </uxap:expandedContent>
        <uxap:snappedContent>
          <Text text="{parts: [{path: 'i18n>FORMAT_AMID_TXT_LBL'},
                                      {path: 'TechnicalMsgID'},
                                      {path: 'ExtBusinessMessageID'}],
                                      formatter: '.formatter.formatMessage'}" />
        </uxap:snappedContent>
        <uxap:actions>
			<Button text="{i18n>DOWNLOAD_BTN_TXT}"
				type="Transparent"
				press="onAction"
				enabled="{this>/tableActionEnabled/singleDownload}"
				c:action="singleDownload" />
			<reuseButton:Share text="{i18n>SHARE_BTN_LBL}" 
                icon=""
                press="onAction" 
                c:action="share" />
        </uxap:actions>
        <uxap:breadcrumbs>
        </uxap:breadcrumbs>
      </uxap:ObjectPageDynamicHeaderTitle>
    </uxap:headerTitle>
    <uxap:headerContent>
      <core:Fragment type="XML" fragmentName="com.sap.cd.maco.monitor.ui.app.displaymessages.view.MessageHeader"/>
    </uxap:headerContent>
    <uxap:sections>
    	<uxap:ObjectPageSection title="{i18n>MSG_PROPERTIES_TITLE}" titleUppercase="false">
        	<uxap:subSections>
            	<uxap:ObjectPageSubSection>
            		<uxap:blocks>
						<smartForm:SmartForm>
							<smartForm:layout>
								<core:Fragment type="XML" fragmentName="com.sap.cd.maco.mmt.ui.reuse.fragment.form.SmartFormLayout"/>
							</smartForm:layout>
							<smartForm:Group label="{i18n>MSG_PROPERTIES_GEN_SUBSECTION_TITLE}">
								<smartForm:GroupElement label="{/xMP4GxC_TransferDoc_UI/ProcessDocumentNumber/#@sap:label}">
									<Link text="{this>/LinkedDocuments/ProcessDocument/LinkDocumentNumber}" 
										  press="onCrossAppNavigation" 
										  c:docType="Process" 
										  wrapping="true"/>
								</smartForm:GroupElement>
								<smartForm:GroupElement label="{/xMP4GxC_TransferDoc_UI/ExternalCommunicationType/#@sap:label}">
									<Text text="{ExternalCommunicationType_Text}" 
										  wrapping="true"/>
								</smartForm:GroupElement>
							</smartForm:Group>
							<smartForm:Group label="{i18n>CONTRL_MSG_TEXT}" 
											 visible="{= !(${TechnicalMsgID} === 'CONTRL' || ${TechnicalMsgID} === 'APERAK')}">
								<smartForm:GroupElement label="{i18n>MSG_REF_TEXT}">
									<Link text="{this>/LinkedDocuments/ControlMessage/ExternalUUID}"
										  press="onCrossAppNavigation" 
										  c:docType="Message" 
										  wrapping="true"/>
								</smartForm:GroupElement>
								<smartForm:GroupElement label="{i18n>Date_LBL}" 
														visible="{=!!${this>/LinkedDocuments/ControlMessage/ExternalUUID}}">
									<Text text="{path: 'this>/LinkedDocuments/ControlMessage/Timestamp',
									             type: 'sap.ui.model.type.DateTime',
												 formatOptions: {style: 'medium'}}"
										  wrapping="true"/>
								</smartForm:GroupElement>
							</smartForm:Group>
							<smartForm:Group label="{i18n>APERAK_MSG_TEXT}" 
											 visible="{= !(${TechnicalMsgID} === 'CONTRL' || ${TechnicalMsgID} === 'APERAK')}">
								<smartForm:GroupElement label="{i18n>MSG_REF_TEXT}">
									<Link text="{this>/LinkedDocuments/AperakMessage/ExternalUUID}"
										  press="onCrossAppNavigation" 
										  c:docType="Message" 
										  wrapping="true"/>
								</smartForm:GroupElement>
								<smartForm:GroupElement label="{i18n>Date_LBL}" 
														visible="{=!!${this>/LinkedDocuments/AperakMessage/ExternalUUID}}">
									<Text text="{path: 'this>/LinkedDocuments/AperakMessage/Timestamp',
										         type: 'sap.ui.model.type.DateTime',
										         formatOptions: { style: 'medium' }}"
										  wrapping="true"/>
								</smartForm:GroupElement>
							</smartForm:Group>
							<smartForm:Group label="{i18n>ORIGINAL_MSG_TEXT}" 
											 visible="{= (${TechnicalMsgID} === 'CONTRL' || ${TechnicalMsgID} === 'APERAK')}">
								<smartForm:GroupElement label="{i18n>MSG_REF_TEXT}">
									<Link text="{this>/LinkedDocuments/TransferDocument/ExternalUUID}"
										  press="onCrossAppNavigation" 
										  c:docType="Message" 
										  wrapping="true"/>
								</smartForm:GroupElement>
								<smartForm:GroupElement label="{i18n>Date_LBL}" 
														visible="{=!!${this>/LinkedDocuments/TransferDocument/ExternalUUID}}">
									<Text text="{path: 'this>/LinkedDocuments/TransferDocument/Timestamp',
												 type: 'sap.ui.model.type.DateTime',
												 formatOptions: { style: 'medium' }}"
										  wrapping="true"/>
								</smartForm:GroupElement>
							</smartForm:Group>
						</smartForm:SmartForm>
            		</uxap:blocks>
            	</uxap:ObjectPageSubSection>
        	</uxap:subSections>
    	</uxap:ObjectPageSection>
    	<uxap:ObjectPageSection title="{i18n>MSG_DATA_TITLE}" titleUppercase="false">
    		<uxap:subSections>
    			<uxap:ObjectPageSubSection>
    				<uxap:blocks>
            			<TextArea value="{path: 'ExternalPayload', formatter: '.formatter.externalPayload'}" 
							editable="false" width="100%" growing="true">
        				</TextArea>
    			    </uxap:blocks>
        		</uxap:ObjectPageSubSection>
			</uxap:subSections>
		</uxap:ObjectPageSection>
    </uxap:sections>
  </uxap:ObjectPageLayout>
</mvc:View>
